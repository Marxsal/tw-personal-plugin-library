{"title":"$:/plugins/MAS/DynaNotator","name":"Dynanote Notations","description":"Add notations to rendered tiddlers simply by selecting text","author":"MAS","version":"0.0.4","core-version":">=5.2.1","source":"","list":"readme history","dependents":"[[$:/plugins/tiddlywiki/dynannotate]]","parent-plugin":"","plugin-type":"plugin","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/mas/dynanotator/config/prefix\":{\"title\":\"$:/plugins/mas/dynanotator/config/prefix\",\"created\":\"20220209050017379\",\"modified\":\"20220306204612351\",\"tags\":\"\",\"text\":\"\"},\"$:/plugins/mas/dynanotator/config/styles\":{\"title\":\"$:/plugins/mas/dynanotator/config/styles\",\"created\":\"20220208035708002\",\"modified\":\"20220306204612364\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\"textarea.dyna-edit {\\nwidth: 100% ;\\n}\\nbutton.dyna-color-button {\\nwidth: fit-content ;\\ndisplay: inline ;\\npadding-left: 0.2em ;\\npadding-right: 0.2em ;\\n}\\n\\ndiv.tc-drop-down-wrapper > div.dyna-pop {\\nmax-width: 450px ;\\nmin-width: 380px ;\\n}\"},\"$:/plugins/mas/dynanotator/config/suffix\":{\"title\":\"$:/plugins/mas/dynanotator/config/suffix\",\"created\":\"20220212212529083\",\"modified\":\"20220306204612374\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"-annotation\"},\"$:/plugins/mas/dynanotator/config/tags\":{\"title\":\"$:/plugins/mas/dynanotator/config/tags\",\"created\":\"20220209003708283\",\"modified\":\"20220306204612381\",\"tags\":\"\",\"text\":\"[[Science]] [[Politics]] [[Quote]] [[Eschatology]]\"},\"$:/plugins/mas/dynanotator/config/ViewTemplateBodyFilter\":{\"title\":\"$:/plugins/mas/dynanotator/config/ViewTemplateBodyFilter\",\"created\":\"20220212004903042\",\"list-before\":\"\",\"modified\":\"20220306204612386\",\"tags\":\"$:/tags/ViewTemplateBodyFilter\",\"text\":\"[tag[Annotate]then[$:/plugins/MAS/DynaNotator/ViewTemplate/body]]\"},\"$:/plugins/mas/dynanotator/history\":{\"title\":\"$:/plugins/mas/dynanotator/history\",\"created\":\"20220212192926128\",\"modified\":\"20220306204612391\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\n* ''0.0.1'' -- 2022-02-12 -- first plugin\\n* ''0.0.4'' -- 2022-02-15 -- Styles for popup width\"},\"$:/plugins/mas/dynanotator/readme\":{\"title\":\"$:/plugins/mas/dynanotator/readme\",\"created\":\"20220212192926142\",\"modified\":\"20220306204612402\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"Select text  to add an annotation. Initially this will only work on tiddlers tagged \\\"Annotate\\\". \"},\"$:/plugins/mas/dynanotator/ViewTemplate/body\":{\"title\":\"$:/plugins/mas/dynanotator/ViewTemplate/body\",\"created\":\"20220207024303361\",\"modified\":\"20220306204612410\",\"tags\":\"\",\"text\":\"\\\\define click-annotation-actions()\\n<$action-setfield $tiddler=\\\"$:/temp/dynannotate/demo/annotation-title\\\" $value=<<annotationTiddler>>/>\\n\\\\end\\n\\n\\\\define create-annotation-actions()\\n<$action-createtiddler\\n\\t$basetitle={{{ [<currentTiddler>addprefix{$:/plugins/MAS/DynaNotator/config/prefix}addsuffix{$:/plugins/MAS/DynaNotator/config/suffix}] }}}\\n\\t$savetitle={{{ [<currentTiddler>addprefix[$:/state/dynannotate/temp-save-title/]] }}}\\n\\tannotate-tiddler=<<currentTiddler>>\\n\\tannotate-text=<<text>>\\n\\tannotate-prefix=<<prefix>>\\n\\tannotate-suffix=<<suffix>>\\n\\tannotate-colour=<<colour>>\\n/>\\n<$set name=\\\"popup-coords\\\" value={{{ [<currentTiddler>addprefix[$:/state/dynannotate/popup-selection/]get[text]] }}}>\\n<$action-deletetiddler $tiddler={{{ [<currentTiddler>addprefix[$:/state/dynannotate/popup-selection/]] }}}/>\\n<$action-setfield $tiddler=\\\"$:/temp/dynannotate/demo/annotation-title\\\" $value={{{ [<currentTiddler>addprefix[$:/state/dynannotate/temp-save-title/]get[text]] }}}/>\\n<$action-popup $state={{{ [<currentTiddler>addprefix[$:/state/dynannotate/popup-annotation/]] }}} $coords=<<popup-coords>>/> !\\n</$set>\\n\\\\end\\n\\n<$reveal tag=\\\"div\\\" class=\\\"tc-tiddler-body\\\" type=\\\"nomatch\\\" stateTitle=<<folded-state>> text=\\\"hide\\\" retain=\\\"yes\\\" animate=\\\"yes\\\">\\n<$list filter=\\\"[all[current]!has[plugin-type]!field:hide-body[yes]]\\\">\\n<div style=\\\"position:relative;\\\"><!-- Needed for the popups to work -->\\n<$dynannotate\\n\\tfilter=\\\"[all[shadows+tiddlers]!has[draft.of]annotate-tiddler<currentTiddler>!annotate-hide[yes]]\\\"\\n\\tactions=<<click-annotation-actions>>\\n\\tpopup={{{ [<currentTiddler>addprefix[$:/state/dynannotate/popup-annotation/]] }}}\\n\\tselection={{{ [<currentTiddler>addprefix[$:/state/dynannotate/selection/]] }}}\\n\\tselectionPrefix={{{ [<currentTiddler>addprefix[$:/state/dynannotate/selection-prefix/]] }}}\\n\\tselectionSuffix={{{ [<currentTiddler>addprefix[$:/state/dynannotate/selection-suffix/]] }}}\\n\\tselectionPopup={{{ [<currentTiddler>addprefix[$:/state/dynannotate/popup-selection/]] }}}\\n\\tsearch={{$:/temp/search}}\\n\\tsearchClass=\\\"tc-dynannotation-search-overlay-blurred\\\"\\n\\tsearchMinLength={{$:/config/Search/MinLength}}\\n>\\n<$transclude mode=\\\"block\\\">\\n<$transclude tiddler=\\\"$:/language/MissingTiddler/Hint\\\"/>\\n</$transclude>\\n</$dynannotate>\\n<$vars stateTiddler={{{ [<currentTiddler>addprefix[$:/state/dynannotate/popup-annotation/]] }}}\\ncurrentDocument=<<currentTiddler>>\\n>\\n<$reveal type=\\\"popup\\\" state=<<stateTiddler>> position=\\\"belowright\\\" animate=\\\"yes\\\" retain=\\\"yes\\\" style=\\\"overflow-y:hidden;\\\">\\n<div class=\\\"tc-drop-down-wrapper\\\">\\n<div class=\\\"tc-drop-down tc-popup-keep dyna-pop\\\" style=\\\"white-space: normal;overflow-y:hidden;\\\">\\n<$tiddler tiddler={{$:/temp/dynannotate/demo/annotation-title}}>\\n<p>\\n<h3>Annotation Tiddler</h3>\\n\\n<$link><$view field=\\\"title\\\"/></$link><br/>\\n\\n<$edit-text size=\\\"100%\\\" minHeight=\\\"100px\\\" class=\\\"dyna-edit\\\"/>\\n\\n<$button class=\\\"dyna-color-button\\\">Copy annotated text to annotation.\\n<$action-setfield text={{{ [{!!text}addsuffix{!!annotate-text}] }}} />\\n</$button><br/>\\n<!-- FIND -->\\n<$list filter=\\\"[list[$:/plugins/MAS/DynaNotator/config/tags!!text]]\\\" variable=\\\"tagname\\\">\\n<$checkbox tag=<<tagname>>> <$text text=<<tagname>>/></$checkbox>\\n</$list>\\n</p>\\n<p>\\n<$reveal type=\\\"nomatch\\\" state=\\\"$:/state/ShowLongColor\\\" text=\\\"show\\\" >\\n<p style=\\\"padding: unset;\\\">\\n<$button set=\\\"$:/state/ShowLongColor\\\" setTo=\\\"show\\\" class=\\\"dyna-color-button\\\">Show Long Colour List</$button>\\n<div class=\\\"tc-colour-chooser\\\">\\n<$macrocall $name=\\\"colour-picker-recent\\\" actions=\\\"\\\"\\\"<$action-setfield $field=\\\"annotate-colour\\\" $value=<<colour-picker-value>>/>\\\"\\\"\\\"/>\\n</div>\\n</p>\\n</$reveal>\\n<$reveal type=\\\"match\\\" state=\\\"$:/state/ShowLongColor\\\" text=\\\"show\\\">\\n\\n<$button set=\\\"$:/state/ShowLongColor\\\" setTo=\\\"hide\\\">Hide Long Colour List</$button>\\n\\nAnnotation Colors:\\n<$macrocall $name='colour-picker' actions=\\\"\\\"\\\"<$action-setfield $field=\\\"annotate-colour\\\" $value=<<colour-picker-value>>/>\\\"\\\"\\\"/>\\n\\n</$reveal>\\n<!-- FIND -->\\n<$button class=\\\"dyna-color-button\\\">Close\\n<$action-deletetiddler $tiddler=<<stateTiddler>>/>\\n</$button> <$button class=\\\"dyna-color-button\\\">Remove\\n<$action-deletetiddler $tiddler=<<currentTiddler>>/>\\n<$action-deletetiddler $tiddler=<<stateTiddler>>/>\\n</$button> <$button class=\\\"dyna-color-button\\\">Hide\\n<$action-setfield $tiddler=<<currentTiddler>> annotate-hide=\\\"yes\\\"/>\\n<$action-deletetiddler $tiddler=<<stateTiddler>>/>\\n</$button> <$button class=\\\"dyna-color-button\\\">Hide All\\n<$list filter=\\\"[all[shadows+tiddlers]!has[draft.of]annotate-tiddler<currentDocument>]\\\" >\\n<$action-setfield $tiddler=<<currentTiddler>> annotate-hide=\\\"yes\\\"/>\\n</$list>\\n<$action-deletetiddler $tiddler=<<stateTiddler>>/>\\n</$button>\\n</p>\\n</$tiddler>\\n</div>\\n</div>\\n</$reveal>\\n\\n</$vars>\\n<$vars popStateTiddler={{{ [<currentTiddler>addprefix[$:/state/dynannotate/popup-selection/]] }}}>\\n<$reveal type=\\\"popup\\\" state=<<popStateTiddler>> position=\\\"belowright\\\" animate=\\\"yes\\\" retain=\\\"yes\\\" style=\\\"overflow-y:hidden;\\\">\\n<div class=\\\"tc-drop-down-wrapper\\\">\\n<div class=\\\"tc-drop-down tc-popup-keep dyna-pop\\\" style=\\\"white-space:normal;\\\">\\n<$vars\\n\\ttext={{{ [<currentTiddler>addprefix[$:/state/dynannotate/selection/]get[text]] }}}\\n\\tprefix={{{ [<currentTiddler>addprefix[$:/state/dynannotate/selection-prefix/]get[text]] }}}\\n\\tsuffix={{{ [<currentTiddler>addprefix[$:/state/dynannotate/selection-suffix/]get[text]] }}}\\n\\tcolour={{{ [<currentTiddler>addprefix[$:/state/dynannotate/annotation-colour/]get[text]] }}}\\n>\\n<$button actions=<<create-annotation-actions>>>\\nCreate annotation\\n</$button>\\n<p>\\nText: <$text text=<<text>>/>\\n</p>\\n<p>\\nPrefix: <$text text=<<prefix>>/>\\n</p>\\n<p>\\nSuffix: <$text text=<<suffix>>/>\\n</p>\\n<$button>\\nClose\\n<$action-deletetiddler $tiddler=<<popStateTiddler>>/>\\n</$button>\\n<$button>\\nUnhide Hidden\\n<$list filter=\\\"[annotate-tiddler<currentTiddler>annotate-hide[yes]]\\\">\\n<$action-setfield annotate-hide=\\\"no\\\"/>\\n<$action-deletetiddler $tiddler=<<popStateTiddler>>/>\\n</$list>\\n</$button>\\n</$vars>\\n</div>\\n</div>\\n</$reveal>\\n</$vars>\\n</div>\\n</$list>\\n\\n</$reveal>\\n\\n\"}}}"}